<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NodePrompt Terminal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            font-size: 13px;
            overflow: hidden;
        }
        
        .terminal-header {
            background: #1a1a1a;
            color: white;
            padding: 6px 10px;
            font-size: 11px;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .terminal-buttons {
            display: flex;
            gap: 4px;
        }
        
        .btn {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: none;
        }
        
        .btn.close { background: #ff5f57; }
        .btn.minimize { background: #ffbd2e; }
        .btn.maximize { background: #28ca42; }
        
        .terminal-title {
            color: #888;
            margin-left: 6px;
        }
        
        .terminal-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .terminal-output {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            font-size: 13px;
            line-height: 1.2;
            white-space: pre-wrap;
        }
        
        .terminal-input {
            background: #1a1a1a;
            padding: 8px 10px;
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .prompt {
            color: #00ff00;
            font-weight: bold;
        }
        
        .input-field {
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            outline: none;
            flex: 1;
            caret-color: #00ff00;
        }
        
        .cursor {
            display: inline-block;
            width: 6px;
            height: 13px;
            background: #00ff00;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .message {
            margin-bottom: 4px;
        }
        
        .user-message {
            color: #00ff00;
        }
        
        .bot-message {
            color: white;
        }
        
        .error {
            color: #ff5555;
        }
        
        .success {
            color: #55ff55;
        }
        
        .warning {
            color: #ffff55;
        }
        
        .crypto-data {
            margin: 4px 0;
            border: 1px solid #333;
            background: #0a0a0a;
        }
        
        .crypto-header {
            background: #1a1a1a;
            color: #00ff00;
            padding: 4px 8px;
            font-weight: bold;
            border-bottom: 1px solid #333;
        }
        
        .crypto-body {
            padding: 6px 8px;
        }
        
        .crypto-row {
            display: flex;
            justify-content: space-between;
            margin: 1px 0;
        }
        
        .positive {
            color: #55ff55;
        }
        
        .negative {
            color: #ff5555;
        }
        
        .chart {
            font-family: 'Courier New', monospace;
            color: #666;
            margin: 4px 0;
        }
        
        .ascii-art {
            color: #888;
            font-size: 11px;
            line-height: 1;
            margin: 6px 0;
        }
        
        .typing-indicator {
            color: #888;
            display: inline-block;
        }
        
        .typing-dots::after {
            content: '...';
            animation: typing 1.5s infinite;
        }
        
        @keyframes typing {
            0% { content: '.'; }
            33% { content: '..'; }
            66% { content: '...'; }
            100% { content: '.'; }
        }
        
        .scrollbar {
            scrollbar-width: thin;
            scrollbar-color: #333 #000;
        }
        
        .scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .scrollbar::-webkit-scrollbar-track {
            background: #000;
        }
        
        .scrollbar::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 3px;
        }
        
        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .compact-list {
            margin: 2px 0;
        }
        
        .compact-row {
            display: flex;
            justify-content: space-between;
            padding: 1px 0;
        }
    </style>
</head>
<body>
    <div class="terminal-header">
        <div class="terminal-buttons">
            <button class="btn close"></button>
            <button class="btn minimize"></button>
            <button class="btn maximize"></button>
        </div>
        <div class="terminal-title">nodeprompt@terminal:~$</div>
    </div>
    
    <div class="terminal-body">
        <div class="terminal-output scrollbar" id="output">
            <div class="message bot-message">NodePrompt Terminal v1.0.0</div>
            <div class="message bot-message">Connected to CoinGecko API | Type 'help' for commands</div>
            <div class="message bot-message">Built by @adamtappedin</div>
            <div class="message bot-message">──────────────────────────────────────</div>
        </div>
        
        <div class="terminal-input">
            <span class="prompt">nodeprompt@terminal:~$</span>
            <input type="text" class="input-field" id="commandInput" autofocus onkeypress="handleKeyPress(event)">
            <span class="cursor" id="cursor"></span>
        </div>
    </div>

    <script>
        const API_KEY = 'CG-EJg28u9CCZB4i7aQphoDJQKw';
        const output = document.getElementById('output');
        const commandInput = document.getElementById('commandInput');
        const cursor = document.getElementById('cursor');
        
        let isProcessing = false;
        
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !isProcessing) {
                const command = commandInput.value.trim();
                if (command) {
                    executeCommand(command);
                    commandInput.value = '';
                }
            }
        }
        
        function printMessage(message, type = 'bot') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.textContent = message;
            output.appendChild(messageDiv);
            scrollToBottom();
        }
        
        function printHTML(html) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot-message';
            messageDiv.innerHTML = html;
            output.appendChild(messageDiv);
            scrollToBottom();
        }
        
        function printUserCommand(command) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.textContent = `nodeprompt@terminal:~$ ${command}`;
            output.appendChild(messageDiv);
            scrollToBottom();
        }
        
        function generateCryptoArt(symbol) {
            const artMap = {
                'BTC': `
    ████████
  ██        ██
 ██  ██████  ██
██  ██    ██  ██
██  ██████    ██
██      ██    ██
 ██  ██████  ██
  ██        ██
    ████████`,
                'ETH': `
      ████
     ██████
    ████████
   ██      ██
  ████    ████
 ██████  ██████
██████████████
████████████████`,
                'ADA': `
    ██████████
   ████    ████
  ████      ████
 ████ ██████ ████
████  ██████  ████
████  ██████  ████
 ████ ██████ ████
  ████      ████
   ████    ████
    ██████████`,
                'SOL': `
██████████████████
██              ██
██  ████████    ██
██  ██    ██    ██
██  ██    ██    ██
██  ████████    ██
██              ██
██████████████████`,
                'DEFAULT': `
  ████████████
 ██          ██
██   ██████   ██
██  ██    ██  ██
██  ██    ██  ██
██   ██████   ██
 ██          ██
  ████████████`
            };
            
            return artMap[symbol.toUpperCase()] || artMap['DEFAULT'];
        }
        
        function generatePriceChart(changePercent) {
            const isPositive = changePercent >= 0;
            const absChange = Math.abs(changePercent);
            const barLength = Math.min(Math.floor(absChange / 2), 20);
            
            let chart = '';
            if (isPositive) {
                chart = '▲ ' + '█'.repeat(barLength) + '░'.repeat(20 - barLength) + ' +' + changePercent.toFixed(2) + '%';
            } else {
                chart = '▼ ' + '█'.repeat(barLength) + '░'.repeat(20 - barLength) + ' ' + changePercent.toFixed(2) + '%';
            }
            
            return `<div class="chart ${isPositive ? 'positive' : 'negative'}">${chart}</div>`;
        }
        
        function printCryptoData(data) {
            const changeClass = data.price_change_percentage_24h >= 0 ? 'positive' : 'negative';
            const changeSymbol = data.price_change_percentage_24h >= 0 ? '+' : '';
            const art = generateCryptoArt(data.symbol);
            const chart = generatePriceChart(data.price_change_percentage_24h);
            
            const cryptoDiv = document.createElement('div');
            cryptoDiv.className = 'crypto-data';
            
            cryptoDiv.innerHTML = `
                <div class="crypto-header">${data.name.toUpperCase()} (${data.symbol.toUpperCase()})</div>
                <div class="crypto-body">
                    <div class="ascii-art">${art}</div>
                    <div class="crypto-row"><span>Price:<span>$${data.current_price.toLocaleString()}</span></div>
                    <div class="crypto-row"><span>24h:<span class="${changeClass}">${changeSymbol}${data.price_change_percentage_24h.toFixed(2)}%</span></div>
                    ${chart}
                    <div class="crypto-row"><span>MCap:<span>$${(data.market_cap / 1e9).toFixed(2)}B</span></div>
                    <div class="crypto-row"><span>Vol:<span>$${(data.total_volume / 1e6).toFixed(2)}M</span></div>
                </div>
            `;
            
            output.appendChild(cryptoDiv);
            scrollToBottom();
        }
        
        function printCompactList(cryptos) {
            const listDiv = document.createElement('div');
            listDiv.className = 'compact-list';
            
            let html = '<div style="color: #888; margin-bottom: 4px;">RANK | NAME        | PRICE      | 24H    | MCAP</div>';
            html += '<div style="color: #333; margin-bottom: 4px;">-----|-------------|------------|--------|--------</div>';
            
            cryptos.forEach((crypto, index) => {
                const changeClass = crypto.price_change_percentage_24h >= 0 ? 'positive' : 'negative';
                const changeSymbol = crypto.price_change_percentage_24h >= 0 ? '+' : '';
                const rank = (index + 1).toString().padStart(2, ' ');
                const name = crypto.symbol.toUpperCase().padEnd(11, ' ');
                const price = ('$' + crypto.current_price.toLocaleString()).padEnd(10, ' ');
                const change = (changeSymbol + crypto.price_change_percentage_24h.toFixed(1) + '%').padEnd(6, ' ');
                const mcap = ('$' + (crypto.market_cap / 1e9).toFixed(1) + 'B').padEnd(8, ' ');
                
                html += `<div class="compact-row">${rank}   | ${name} | ${price} | ${changeClass} ${change} | ${mcap}</div>`;
            });
            
            listDiv.innerHTML = html;
            output.appendChild(listDiv);
            scrollToBottom();
        }
        
        function showTyping() {
            isProcessing = true;
            commandInput.disabled = true;
            cursor.style.display = 'none';
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message typing-indicator';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = 'Processing<span class="typing-dots"></span>';
            output.appendChild(typingDiv);
            scrollToBottom();
        }
        
        function hideTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
            
            isProcessing = false;
            commandInput.disabled = false;
            cursor.style.display = 'inline-block';
            commandInput.focus();
        }
        
        function scrollToBottom() {
            output.scrollTop = output.scrollHeight;
        }
        
        async function fetchCryptoData(coinId) {
            try {
                const response = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}?x_cg_demo_api_key=${API_KEY}`);
                if (!response.ok) throw new Error('API request failed');
                return await response.json();
            } catch (error) {
                console.error('Error fetching crypto data:', error);
                return null;
            }
        }
        
        async function fetchTopCryptos(limit = 10) {
            try {
                const response = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=${limit}&page=1&sparkline=false&x_cg_demo_api_key=${API_KEY}`);
                if (!response.ok) throw new Error('API request failed');
                return await response.json();
            } catch (error) {
                console.error('Error fetching top cryptos:', error);
                return null;
            }
        }
        
        function getCoinId(query) {
            const commonCoins = {
                'bitcoin': 'bitcoin', 'btc': 'bitcoin',
                'ethereum': 'ethereum', 'eth': 'ethereum',
                'cardano': 'cardano', 'ada': 'cardano',
                'solana': 'solana', 'sol': 'solana',
                'xrp': 'ripple', 'ripple': 'ripple',
                'dogecoin': 'dogecoin', 'doge': 'dogecoin',
                'litecoin': 'litecoin', 'ltc': 'litecoin',
                'chainlink': 'chainlink', 'link': 'chainlink',
                'polkadot': 'polkadot', 'dot': 'polkadot',
                'binancecoin': 'binancecoin', 'bnb': 'binancecoin'
            };
            
            return commonCoins[query.toLowerCase()] || query.toLowerCase();
        }
        
        async function executeCommand(command) {
            printUserCommand(command);
            showTyping();
            
            const cmd = command.toLowerCase().trim();
            const args = cmd.split(' ');
            
            if (cmd === 'help') {
                hideTyping();
                printMessage('Available commands:');
                printMessage('  help              - Show this help');
                printMessage('  price <coin>      - Get crypto price');
                printMessage('  top [number]      - Top cryptos (default: 10)');
                printMessage('  market            - Market overview');
                printMessage('  clear             - Clear terminal');
                printMessage('  exit              - Exit');
                printMessage('──────────────────────────────────────');
            }
            else if (cmd === 'clear') {
                hideTyping();
                output.innerHTML = '';
            }
            else if (cmd === 'exit') {
                hideTyping();
                printMessage('Connection closed.', 'error');
                commandInput.disabled = true;
                cursor.style.display = 'none';
            }
            else if (args[0] === 'price' && args[1]) {
                const coinId = getCoinId(args[1]);
                const data = await fetchCryptoData(coinId);
                
                hideTyping();
                if (data) {
                    const coinData = {
                        name: data.name,
                        symbol: data.symbol,
                        current_price: data.market_data.current_price.usd,
                        price_change_percentage_24h: data.market_data.price_change_percentage_24h,
                        market_cap: data.market_data.market_cap.usd,
                        total_volume: data.market_data.total_volume.usd
                    };
                    printCryptoData(coinData);
                } else {
                    printMessage(`Error: '${args[1]}' not found`, 'error');
                }
            }
            else if (args[0] === 'top') {
                const limit = parseInt(args[1]) || 10;
                const topCryptos = await fetchTopCryptos(Math.min(limit, 50));
                
                hideTyping();
                if (topCryptos) {
                    printMessage(`Top ${limit} cryptocurrencies:`);
                    printCompactList(topCryptos.slice(0, limit));
                } else {
                    printMessage('Error: Could not fetch data', 'error');
                }
            }
            else if (cmd === 'market') {
                const topCryptos = await fetchTopCryptos(5);
                
                hideTyping();
                if (topCryptos) {
                    const totalMcap = topCryptos.reduce((sum, crypto) => sum + crypto.market_cap, 0);
                    const avgChange = topCryptos.reduce((sum, crypto) => sum + crypto.price_change_percentage_24h, 0) / 5;
                    
                    printMessage('Market Overview:');
                    printMessage(`Top 5 MCap: $${(totalMcap / 1e12).toFixed(2)}T`);
                    printMessage(`Avg Change: ${avgChange >= 0 ? '+' : ''}${avgChange.toFixed(2)}%`);
                    printMessage(`Sentiment: ${avgChange >= 0 ? 'BULLISH' : 'BEARISH'}`);
                    printMessage('──────────────────────────────────────');
                    
                    topCryptos.forEach(crypto => {
                        printCryptoData(crypto);
                    });
                } else {
                    printMessage('Error: Could not fetch market data', 'error');
                }
            }
            else {
                hideTyping();
                printMessage(`Command not found: ${command}`, 'error');
                printMessage("Type 'help' for commands");
            }
        }
        
        // Initialize terminal
        commandInput.focus();
        
        // Keep cursor active
        commandInput.addEventListener('focus', () => {
            cursor.style.display = 'inline-block';
        });
        
        commandInput.addEventListener('blur', () => {
            setTimeout(() => commandInput.focus(), 100);
        });
        
        // Auto-load market data
        setTimeout(() => {
            executeCommand('help');
        }, 1000);
    </script>
</body>
</html>
